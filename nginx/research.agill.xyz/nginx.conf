# research.agill.xyz Nginx configuration

# The upstream component Nginx needs to connect to; I.e., the Django project.
upstream research_agill_xyz_django {
    server unix:///tmp/research.agill.xyz.sock;
}

server {
    # The port to listen on.
    listen 80;

    # Either server address or fully-qualified domain name.
    server_name research.localhost research.agill.xyz;
    charset utf-8;

    # Max upload size;
    client_max_body_size 16M;

    # Django static content
    location /static {
        # The BASE_REPOSITORY_PATH path is generated by deploy.py
        alias BASE_REPOSITORY_PATH/research.agill.xyz/research_agill_xyz/static;
    }

    # Root
    location / {
        uwsgi_pass research_agill_xyz_django;
        # The BASE_REPOSITORY_PATH path is generated by deploy.py
        include BASE_REPOSITORY_PATH/nginx/uwsgi_params;
    }
}
