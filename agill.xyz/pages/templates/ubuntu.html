{% load pygmentify_tags %}
<!doctype HTML>
<html>
{% include "includes/head.html" %}
<body>
{% include "includes/header.html" %}

<div class="page-content">
<div class="wrap">
    <p>I end up installing and reinstalling Ubuntu <em>a lot</em>. As with many Linux users, I cannot <em>not</em> customize my installation. However, I use multiple devices with several accounts, some of which are not managed by me. This leads to a massive headache when trying to keep customizations in sync, especially when they keep changing as I learn new things.</p>
    <p>This page is an attempt to consolidate all of my notes and helper scripts into the same place.</p>

    <ul>
        <li><a href="#installation">Installation</a></li>
        <ul>
            <li><a href="#live-disk">Creating the Startup Disk</a></li>
            <li><a href="#installing">Installing Ubuntu</a></li>
        </ul>
        <li><a href="#first-steps">First Steps</a></li>
        <ul>
            <li><a href="#bootstrap-software">Bootstrap Software</a></li>
            <li><a href="#ssh-keys">SSH Keys</a></li>
            <li><a href="#dotfiles">Dotfiles</a></li>
        </ul>
        <li><a href="#software">Software</a></li>
        <ul>
            <li><a href="#user-pip">Installing Pip as a User</a></li>
            <li><a href="#local-usr">Installing to <code>~/.local/</code> as a User</a></li>
            <li><a href="#python-libraries">Python Libraries</a></li>
            <li><a href="#vscode-extensions">Visual Studio Code Extensions</a></li>
            <li><a href="#apt-packages">Apt Packages</a></li>
        </ul>
        <li><a href="#customization">Customization</a></li>
        <ul>
            <li><a href="#ubuntu-settings">Ubuntu Settings</a></li>
            <li><a href="#gnome-tweaks">Gnome Tweak Tool</a></li>
            <li><a href="#network">Network Settings</a></li>
            <li><a href="#themes">Themes</a></li>
            <li><a href="#gnome-extensions">Gnome Extensions</a></li>
            <li><a href="#sdsmt">School VPN and Network Drives</a></li>
        </ul>
    </ul>

    <h1 id="installation">Installation</h1>
        <p>Actually installing Ubuntu is a very simple task. The folks at Canonical have put extraordinary amounts of effort to make installing Ubuntu both fast and simple.</p>
        <h3 id="live-disk">Creating the Startup Disk</h3>
            <p>I only mention this because it has changed in recent years. You used to have to use <a href="https://unetbootin.github.io/">UNetbootin</a> to create a live USB from an ISO image. Nowadays you can use the builtin Startup Disk Creator to flash an ISO image to a USB drive. There's no need to install additional software, or run anything with <code>sudo</code>.</p>

            <img class="centered" src="/static/images/ubuntu-configuration/startup-disk-creator.png">

            <p>Select the ISO and USB drive you wish to flash, and click "Make Startup Disk". It will take some time, but is otherwise painless.</p>
            <p>Note that the USB drive chosen may make a difference. I have learned that whenever I try to install from an image flashed to one of <a href="http://a.co/d/94snmEr">these</a> flash drives, I get hit by <a href="https://bugs.launchpad.net/ubuntu/+source/ubiquity/+bug/658865">this nasty bug</a>. In short, the fix is to select "Try Ubuntu without installing" when prompted, and then delete <code>/usr/lib/ubiquity/apt-setup/generators/40cdrom</code> before running the installer.</p>
        <h3 id="installing">Installing Ubuntu</h3>
            <p>This is a straightforward matter. The only thing worth mentioning is the installation type. You have several choices:</p>

            <img class="centered" src="/static/images/ubuntu-configuration/partition-settings.png">

            <p>My choice depends on the device I am installing Ubuntu on. On several, I dual boot with other operating systems. On some, I use only Ubuntu. Your mileage may vary. Make sure to backup your data regardless of your choice.</p>
    <h1 id="first-steps">First Steps</h1>
        <h3 id="bootstrap-software">Bootstrap Software</h3>
            <p>Before anything else can be done, I need <code>vim</code> and <code>git</code></p>
            <!-- Find a way to make this indentable. -->
{% pygmentify %}
<pre class="shell">
sudo apt install vim git
</pre>
{% endpygmentify %}
        <h3 id="ssh-keys">SSH Keys</h3>
            <p>Before I can clone my <a href="https://github.com/Notgnoshi/dotfiles">dotfiles</a> repository, I need to set up SSH keys for both <a href="https://github.com/Notgnoshi">github.com</a>, <a href="https://gitlab.mcs.sdsmt.edu">gitlab.mcs.sdsmt.edu</a> and <a href="https://git.agill.xyz/">git.agill.xyz</a>.</p>
{% pygmentify %}
<pre class="shell">
mkdir -p ~/.ssh
ssh-keygen -t rsa -b 4096 -f ~/.ssh/git
echo "AddKeysToAgent yes

Host github.com
    IdentityFile ~/.ssh/git

Host git.agill.xyz
    IdentityFile ~/.ssh/git

Host gitlab.mcs.sdsmt.edu
    IdentityFile ~/.ssh/git

Host anguish
    IdentityFile ~/.ssh/digitalocean

Host limbo
    IdentityFile ~/.ssh/limbo

Host agill.xyz
    IdentityFile ~/.ssh/limbo

Host linux103
    HostName linux103.mcs.sdsmt.edu
    User xxxxxxx
    IdentityFile ~/.ssh/opplab" > ~/.ssh/config
</pre>
{% endpygmentify %}
            <p>And then add the SSH keys to the proper accounts.</p>
        <h3 id="dotfiles">Dotfiles</h3>
            <p>Then I clone my dotfiles repository to <code>~/.config/dotfiles/</code> and symlink each of the dotfiles so that I don't have a git repository in my home folder.</p>
{% pygmentify %}
<pre class="shell">
git clone git@github.com:Notgnoshi/dotfiles.git ~/.config/dotfiles
~/.config/deploy.sh ~
# Answer 'y' to 'Update dotfiles and plugins...' prompt
# Answer 'y' to 'Install fzf?' prompt
~/bin/configure.sh
source ~/.bashrc
</pre>
{% endpygmentify %}
            <p>This installation and configure process needs some work before I am completely happy with it. For one, I would like to forego <code>~/bin/</code> in favor of <code>~/.local/bin/</code> and I would like to remove the dependence on <a href="https://git.agill.xyz">git.agill.xyz</a> for a number of reasons. I would also like to rewrite the <code>bin/configure.sh</code> script to do everything that I'm listing on this page.</p>
    <h1 id="software">Software</h1>
        <h3 id="user-pip">Installing Pip as a User</h3>
            <p>For machines I do not have <code>sudo</code> privileges on, but still want an effective Python environment (Looking at you, school Linux lab), install Pip as a user.</p>
{% pygmentify %}
<pre class="shell">
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python3 get-pip.py --user
</pre>
{% endpygmentify %}
        <h3 id="local-usr">Installing to <code>~/.local/</code> as a User</h3>
            <p>The only thing needed to do here is add things to my path(s) so that I can build and install programs to <code>~/.local/</code> as a user. The following is set already in my <code>~/.bashrc</code>, so there's no extra configuration to do.</p>
{% pygmentify %}
<pre class="shell">
# Add ~/bin/ to path
export PATH="$HOME/bin:$PATH"

# Add locally-installed binaries to path
export PATH="$HOME/.local/bin:$PATH"

# Add local header files to gcc path
export CPATH="$HOME/.local/include:$CPATH"

# Add local libraries to linker path
export LIBRARY_PATH="$LIBRARY_PATH:$HOME/.local/lib"

# Add local libraries to runtime path
export LD_LIBRARY_PATH="$LIBRARY_PATH"
</pre>
{% endpygmentify %}
        <h3 id="python-libraries">Python Libraries</h3>
            <p>The Ubuntu repositories have an out-of-date version of Pip, so I prefer to install it without using Apt.</p>
{% pygmentify %}
<pre class="shell">
curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
sudo -H python3 get-pip.py
</pre>
{% endpygmentify %}
            <p>Now, you're not supposed to install Python packages with <a href="https://stackoverflow.com/questions/21055859/what-are-the-risks-of-running-sudo-pip">sudo</a>, so install them as a user</p>
{% pygmentify %}
<pre class="shell">
pip install --upgrade --user pylint pycodestyle pydocstyle nose pygments       \
    matplotlib sympy scipy numpy pandas seaborn ipython jupyter jupyterlab     \
    virtualenv yapf
</pre>
{% endpygmentify %}
        <h3 id="apt-packages">Apt Packages</h3>
            <p>Previously mentioned, there are essential packages that a prerequisites for anything else.</p>
{% pygmentify %}
<pre class="shell">
sudo apt install vim git curl
</pre>
{% endpygmentify %}
            <p>Here are commands essential to development work.</p>
{% pygmentify %}
<pre class="shell">
sudo apt install gcc g++ clang clang-format clang-tidy gdb make shellcheck     \
    doxygen graphviz texlive-full chktex pdf2svg pandoc python3-dev
</pre>
{% endpygmentify %}
            <p>Here are essential utilities.</p>
{% pygmentify %}
<pre class="shell">
sudo apt install htop nmap traceroute screen screenfetch linux-tools-common    \
    linux-tools-generic openssh-server tree iperf net-tools nfs-common pv
</pre>
{% endpygmentify %}
            <p>And tools necessary for further customization.</p>
{% pygmentify %}
<pre class="shell">
sudo add-apt-repository ppa:numix/ppa
sudo add-apt-repository ppa:mikhailnov/pulseeffects
sudo apt install gnome-tweak-tool chrome-gnome-shell numix-gtk-theme           \
    numix-icon-theme-circle pulseeffects
</pre>
{% endpygmentify %}
        <h3 id="vscode-extensions">Visual Studio Code Extensions</h3>
            <p style="color: red">Just how to set up Settings Sync on a new computer.</p>
{% pygmentify %}
<pre class="shell">
curl https://go.microsoft.com/fwlink/?LinkID=760868 -o code.deb
sudo dpkg -i code.deb
</pre>
{% endpygmentify %}
    <h1 id="customization">Customization</h1>
        <p>The absolute very first thing I do is unpin <em>every</em> application except for Nautilus and Firefox from the dock. And then I clean everything but <code>Documents</code>, <code>Downloads</code>, and <code>Desktop</code> from my home folder.</p>
{% pygmentify %}
<pre class="shell">
rm -rf examples.desktop Pictures Videos Music Public Templates
</pre>
{% endpygmentify %}
        <h3 id="ubuntu-settings">Ubuntu Settings</h3>
            <p style="color: red">Look into gsettings...</p>
        <h3 id="gnome-tweaks">Gnome Tweak Tool</h3>
        <h3 id="network">Network Settings</h3>
            <p style="color: red">fstab, etc/hosts</p>
        <h3 id="themes">Themes</h3>
        <h3 id="gnome-extensions">Gnome Extensions</h3>
        <h3 id="sdsmt">School VPN and Network Drives</h3>
        <h3 id="misc">Misc Config</h3>
            <p>I like enabling insults on incorrect <code>sudo</code> password attempts. It adds needed levity when it's nearing a deadline and I can't build a PDF because LaTeX is a bitch about SVG images.</p>
{% pygmentify %}
<pre class="shell">
# Add 'Defaults insults' to '/etc/sudoers'
sudo visudo
</pre>
{% endpygmentify %}
</div>
</div>

{% include "includes/footer.html" %}
</body>
</html>
